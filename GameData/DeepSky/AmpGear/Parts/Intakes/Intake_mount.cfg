PART:NEEDS[!TheSpice]
{
    // --- general parameters ---
    name = dsag_intrbm
    module = Part
    author = bac9

    // --- asset parameters ---
    MODEL
    {
        model = DeepSky/AmpGear/Parts/Intakes/B9intmount
		texture = model000, DeepSky/AmpGear/Parts/Intakes/B9intmounttex
		scale = 1, 1, 1
    }
    rescaleFactor = 1

    // --- node definitions ---
    node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0
    node_stack_bottom1 = 0.0, 0.625, 2.0, 0.0, 0.0, 1.0, 1

    // --- editor parameters ---
    TechRequired = hypersonicFlight
    entryCost = 16000
    cost = 3200
    category = Aero
    subcategory = 0
    title = DS RBM Variable Geometry Intake
    manufacturer = Deep Sky
    description = This beastly intake features a ramp that dynamically adjusts according to velocity in atmosphere to optimize intake at all speeds. Well, that's what the label says. Like the Mk2 Voyager intake, the RBM contains a versatile, upgradeable atmospheric filtration system. Unlike it, this one remains useable as an ultrasonic intake.
    // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
    attachRules = 1,1,1,1,0

    // --- standard part parameters ---
    mass = 0.6
    thermalMassModifier = 12.0
    heatConvectiveConstant = 0.75
    emissiveConstant = 0.95
    dragModelType = default
    maximum_drag = 0.2
    minimum_drag = 0.2
    angularDrag = 1
    crashTolerance = 40
    breakingForce = 1300
    breakingTorque = 1300
    maxTemp = 3100
    fuelCrossFeed = True
    bulkheadProfiles = size1, srf
    tags = aero breathe fligh inlet intake jet mount oxygen suck supersonic
	
    MODULE
    {
        name = ModuleResourceIntake
        resourceName = IntakeAir
        checkForOxygen = true
        area = 0.0075
        intakeSpeed = 15
        intakeTransformName = Intake
        
		machCurve
		{
			key = 0 0.8 0 0
			key = 1 1 0 0
			key = 3 2 0 0
			key = 6 2.2 0 0
			key = 12 1.2 0 0
		}
    }
    MODULE
    {
        name = ModuleResourceIntake
        resourceName = IntakeAtm
        area = 0.0075
        intakeSpeed = 15
        intakeTransformName = Intake
        
		machCurve
		{
			key = 0 0.8 0 0
			key = 1 1 0 0
			key = 3 2 0 0
			key = 6 2.2 0 0
			key = 12 1.2 0 0
		}
    }
	MODULE
	{
		name = ModuleResourceIntake
		resourceName = LqdOxygen
		checkForOxygen = true
		intakeTransformName = Intake
		area = 0.015
		intakeSpeed = 20
		machCurve
		{
			key = 2.5 0
			key = 4 0.5
		}
		moduleIsEnabled = false
		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = dsag_LOXDistiller
				description__ = LqdOxygen
				techRequired__ = aerospaceTech
				moduleIsEnabled = true
			}
		}
	}
	
	RESOURCE
	{
		name = IntakeAir
		amount = 20
		maxAmount = 20
	}
	
	RESOURCE
	{
		name = IntakeAtm
		amount = 20
		maxAmount = 20
	}
	
	RESOURCE
	{
		name = LqdOxygen
		amount = 0
		maxAmount = 300
	}

    MODULE
    {
        name = ModuleB9AnimateIntake
        animationName = intake_rbm_shock_ramp
        responseSpeed = 0.05
        intakeClosedState = 0
        machCurve
        {
            key = 1 0 0 0
            key = 4 1 1 1
        }
    }
	
	MODULE:NEEDS[TheSpice]
	{
		name = ModuleResourceHarvester
		HarvesterType = 2
		Efficiency = 1
		airSpeedStatic = 3000
		ResourceName = SpiceGas
		ConverterName = SpiceGas Filter
		StartActionName = Start SpiceGas Filter
		StopActionName = Stop SpiceGas Filter
		ToggleActionName = Toggle SpiceGas Filter
		intakeTransformName = Intake
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3
		}
		moduleIsEnabled = false
		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = dsts_SpiceDistiller
				description__ = SpiceGas
				techRequired__ = experimentalScience
				moduleIsEnabled = true
			}
		}
	}
	
	MODULE
	{
		name = ModuleResourceConverter
		AlwaysActive = true
		ConverterName = Atmosphere Distiller
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 19.47
		}
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 5
		}
		OUTPUT_RESOURCE
		{
			ResourceName = Oxidizer
			Ratio = 5
		}
		moduleIsEnabled = false
		showUpgradesInModuleInfo = true
		UPGRADES
		{
			UPGRADE
			{
				name__ = dsag_LOXDistiller
				description__ = LqdOxygen to Oxidizer.
				techRequired__ = aerospaceTech
				moduleIsEnabled = true
			}
		}
	}
	
	MODULE
	{
		name = ModuleAnimationGroup
		deployAnimationName = 
		activeAnimationName = 
		moduleType = Filter
	}
}